---
 - hosts: all
   tasks:
       - name: 'Install the needed libglew version.'
         become: yes
         apt:
             deb: http://mirrors.kernel.org/ubuntu/pool/main/g/glew/libglew1.10_1.10.0-3_amd64.deb
             state: present

       - name: 'Add the RuneScape repository.'
         become: yes
         block:
             - apt_key:
                 url: https://content.runescape.com/downloads/ubuntu/runescape.gpg.key
                 state: present
             - apt_repository:
                 repo: 'deb [trusted=yes] https://content.runescape.com/downloads/ubuntu trusty non-free'
                 state: present
       - name: 'Install RuneScape.'
         become: yes
         apt:
             deb: runescape-launcher
             state: present
             allow_unauthenticated: yes

       - name: 'Disable the repository (so that updates can work again).'
         become: yes
         lineinfile:
             path: /etc/apt/sources.list.d/runescape.list
             regexp: '^deb https://content.runescape.com'
             line: '# deb https://content.runescape.com/downloads/ubuntu trusty non-free'
